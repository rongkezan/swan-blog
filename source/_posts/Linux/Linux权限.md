---
title: Linux 权限
date: {{ date }}
categories:
- Linux
---

# Linux 权限

## 权限概述

在 Linux 系统中，我们所有的操作实质都是在进行进程访问文件的操作。

我们访问文件需要先取得相应的访问权限，而访问权限是通过 Linux 系统中的安全模型获得的。

对于 Linux 系统中的安全模型，我们需要知道下面两点：

1. Linux 系统上最初的安全模型叫 DAC, 全称是 Discretionary Access Control ，翻译为自主访问控制。
2. 后来又增加设计了一个新的安全模型叫 MAC, 全称是 Mandatory Access Control, 翻译为强制访问控制。

MAC 和 DAC 不互斥，DAC 是最基本的安全模型，也是通常我们最常用到的访问控制机制是 Linux 必须具有的功能， 而 MAC 是构建在 DAC 之上的加强安全机制，属于可选模块。访问前， Linux 系统通常都是先做 DAC 检查， 如果没有通过则操作直接失败 ; 如果通过 DAC 检查并且系统支持 MAC 模块，再做 MAC 权限检查。

## 权限分类

| 权限 | 缩写 | 数字代号 |
| ------- | ---- | -------- |
| Read   | r    | 4        |
| Write  | w    | 2        |
| Execute  | x    | 1        |

## 权限说明

通过 ll 查看文件列表，以某一个文件举例：

```shell
-rw-r--r--  1 keith  staff   9.4K Feb 15 15:54 loss.py
```

第 1 个字符表示文件类型，普通文件 (-)、目录文件 (d)、套接字文件 (s)，管道文件 (p)，字符文件 (c)，块文件 (b)，链接文件 (l)

第 2 个字符开始的 rw-r--r-- 部分表示文件的权限位，共有 9 位。

含义是：

1. 第 2~4 位的 rw- 表示该文件可被它的 owner （属主）以 r 或 w 或 x 的权限访问。
2. 第 5~7 位的 r-- 表示该文件可被与该文件同一属组的用户以 r 或 x 的权限访问
3. 第 8~10 位的 r-- 表示该文件可被其它未知用户以 r 或 x 的权限访问。

## 权限修改

```shell
# 减少权限
chmod -rwx [文件名|目录名]
# 增加权限
chmod +rwx [文件名|目录名]
# 修改文件|目录的拥有者
chown [用户名] [文件名|目录名]
# 递归修改文件|目录的组
chgrp -R [组名] [文件名|目录名]
# 递归修改文件权限
chmod -R 755 [文件名|目录名]
```

## 获得权限

```shell
# 切换到指定用户
su [user]
# 暂时切换为管理员权限
sudo [command]
# 为了频繁的执行某些只有超级用户才能执行的权限，可以使用下面命令
sudo -i
```

