---
title: Mysql 日志文件
date: {{ date }}
categories:
- 数据库
---

## Mysql 有哪些日志文件

![在这里插入图片描述](https://img-blog.csdnimg.cn/554533076713452c9fb76077211686aa.png)

- 错误日志 （error log）：错误日志文件对MySQL的启动、运行、关闭过程进行了记录，能帮助定位MySQL问题。
- 慢查询日志 （slow query log）：慢查询日志是用来记录执行时间超过long_query_time 这个变量定义的时长的查询语句。通过慢查询日志，可以查找出哪些查询语句的执行效率很低，以便进行优化。
- 一般查询日志 （general log）：一般查询日志记录了所有对MySQL数据库请求的信息，无论请求是否正确执行。
- 二进制日志 （bin log）：关于二进制日志，它记录了数据库所有执行的DDL和DML语句（除了数据查询语句select、show等），以事件形式记录并保存在二进制文件中。

其中还有两个 InnoDB 存储引擎特有的日志文件

- 重做日志 （redo log）：重做日志至关重要，因为它们记录了对于InnoDB存储引擎的事务日志。
- 回滚日志 （undo log）：回滚日志同样也是InnoDB引擎提供的日志，顾名思义，回滚日志的作用就是对数据进行回滚。当事务对数据库进行修改，InnoDB引擎不仅会记录redo log，还会生成对应的undo log日志；如果事务执行失败或调用了rollback，导致事务需要回滚，就可以利用undo log中的信息将数据回滚到修改之前的样子。

## binlog 和 redolog 的区别

redolog是一种物理日志，记录了数据库引擎在写入数据时所做的物理操作，如在磁盘上写入一个数据页，或者修改一个数据页中的某个值。redo log是在事务提交之前写入的，它的作用是保证在数据库出现故障时，可以通过重放redo log来恢复数据。

binlog是一种逻辑日志，记录了数据库的逻辑操作，如对某个表进行了什么操作，如插入、修改或删除数据等。binlog是在事务提交之后写入的，它的作用是记录数据库的修改历史，用于数据备份、数据恢复、主从复制等功能。

因为两种日志的作用和使用场景不同，所以在MySQL中需要同时存在redo log和binlog来保证数据的可靠性和一致性。如果只有binlog而没有redo log，当数据库发生故障时，虽然可以使用binlog来恢复数据，但是由于binlog只记录了逻辑操作，而没有记录物理操作，因此可能会导致数据的不一致。同样的，如果只有redo log而没有binlog，虽然可以保证数据的物理一致性，但是对数据恢复、备份实现比较麻烦。因为redo log是一种物理日志，记录的是数据库引擎在写入数据时所做的物理操作，因此对于用户而言，它的内容是不可读的。

在MySQL中，使用redo log进行数据恢复和备份通常需要使用专门的工具和技术，如MySQL的“crash-safe”技术，或者第三方工具如Percona XtraBackup等。这些工具可以通过重放redo log来恢复数据，或者使用增量备份的方式对数据进行备份，以减少备份的时间和空间开销。

虽然redo log也可以用于数据恢复和备份，但是相比binlog而言，redo log的使用场景更为有限。binlog记录的是逻辑操作，可以直接用于恢复数据或者进行增量备份，同时也可以通过一些工具和技术对其进行解析和分析。因此，如果需要进行数据恢复、备份等功能，建议使用binlog来实现。