---
title: 计算机网络
date: {{ date }}
categories:
- 系统设计
---

## 网络体系结构

![在这里插入图片描述](https://img-blog.csdnimg.cn/4f0c882c6da342fc968cffb91b9ad0cf.png)

## 从浏览器地址栏输入 **url** 到显示主页的过程

1. DNS 解析：将域名解析成对应的 IP 地址。

2. TCP连接：与服务器通过三次握手，建立 TCP 连接

3. 向服务器发送 HTTP 请求

4. 服务器处理请求，返回HTTp响应

5. 浏览器解析并渲染页面

6. 断开连接：TCP 四次挥手，连接结束

## DNS 解析过程

![在这里插入图片描述](https://img-blog.csdnimg.cn/bec87e5e9f154c599efc64fcba4f9f41.png)

假设你要查询 www.baidu.com 的 IP 地址；

首先会查找浏览器的缓存,看看是否能找到 www.baidu.com 对应的IP地址，找到就直接返回；否则进行下一步；

将请求发往给本地DNS服务器，如果查找到也直接返回，否则继续进行下一步；

![在这里插入图片描述](https://img-blog.csdnimg.cn/012116ad4b174a078b20a492f485f08b.png)

## Websocket 和 socket 的区别

Socket 其实就是等于 IP 地址 + 端口 + 协议 。

具体来说，Socket 是一套标准，它完成了对 TCP/IP 的高度封装，屏蔽网络细节，以方便开发者更好地进行网络编程。

WebSocket 是一个持久化的协议，它是伴随 H5 而出的协议，用来解决 http 不支持持久化连接 的问题。

Socket 一个是 网编编程的标准接口 ，而 WebSocket 则是应用层通信协议。

## Http 1.0 1.1 2.0 3 的区别

>  HTTP/1.0 默认是短连接，可以强制开启，HTTP/1.1 默认长连接，HTTP/2.0 采用多路复用。

### HTTP/1.0

默认使用 短连接 ，每次请求都需要建立一个 TCP 连接。它可以设置 Connection: keep-alive 这个字段，强制开启长连接。

### HTTP/1.1

引入了持久连接，即 TCP 连接默认不关闭，可以被多个请求复用。分块传输编码，即服务端每产生一块数据，就发送一块，用” 流模式” 取代” 缓存模式”。管道机制，即在同一个 TCP 连接里面，客户端可以同时发送多个请求。

### HTTP/2.0

二进制协议，1.1 版本的头信息是文本（ASCII 编码），数据体可以是文本或者二进制；2.0 中，头信息和数据体都是二进制。

完全多路复用，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应。

报头压缩，HTTP 协议不带有状态，每次请求都必须附上所有信息。Http/2.0 引入了头信息压缩机制，使用 gzip 或 compress 压缩后再发送。

服务端推送，允许服务器未经请求，主动向客户端发送资源。

### HTTP/3

HTTP/3主要有两大变化，传输层基于**UDP**、使用**QUIC**保证**UDP**可靠性。HTTP/2存在的一些问题，比如重传等等，都是由于TCP本身的特性导致的，所以

HTTP/3在QUIC的基础上进行发展而来，QUIC（Quick UDP Connections）直译为快速UDP网络连接，底层使用UDP进行数据传输。

HTTP/3主要有这些特点：

- 使用UDP作为传输层进行通信
- 在UDP的基础上QUIC协议保证了HTTP/3的安全性，在传输的过程中就完成了TLS加密握手
- HTTPS 要建⽴⼀个连接，要花费 6 次交互，先是建⽴三次握⼿，然后是 TLS/1.3的三次握⼿。QUIC 直接把以往的 TCP 和 TLS/1.3 的 6 次交互合并成了 3 次，减少了交互次数。
- QUIC 有⾃⼰的⼀套机制可以保证传输的可靠性的。当某个流发⽣丢包时，只会阻塞这个流，其他流不会受到影响。

## HTTPS

### 加密算法

对称加密：DES, 3DES, AEC

非对称加密：公钥、私钥，公钥通过私钥生成

1. 明文 > 公钥加密 > 密文 > 私钥解密 > 明文
2. 明文 > 私钥加密 > 密文 > 公钥解密 > 明文

**流程**

第一次请求，服务器把公钥返回给客户端

第二次请求，客户端拿刚下发的公钥对数据加密，发送给服务器

**风险**

代理服务器拦截到这个请求，虽然解不开数据包，但是可以通过公钥加密发送一个伪请求

代理服务器还可以伪造公钥和私钥，浏览器无法判断公钥是不是真的服务器下发的

### 证书和数字签名

> 可以解决伪造公钥私钥的问题

Https中，客户端在走80端口前会先走443端口来获取服务端下发的证书，并生成加密的随机数给服务端

![在这里插入图片描述](https://img-blog.csdnimg.cn/20210218212333383.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjEwMzAyNg==,size_16,color_FFFFFF,t_70)

在向443发完请求之后，向80端口发请求

![在这里插入图片描述](https://img-blog.csdnimg.cn/20210218205803436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjEwMzAyNg==,size_16,color_FFFFFF,t_70)