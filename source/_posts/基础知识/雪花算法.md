---
title: 雪花算法
date: {{ date }}
categories:
- 基础知识
---

![在这里插入图片描述](https://img-blog.csdnimg.cn/31b98dc293134cc7a6c604dc6afadb41.png)

- snowflake：一共64位
- 第一部分：1位，一直都是0
  - 二进制里第一位如果是1，则代表是负数，但我们生成的ID都是正数，所以第一位统一是0
- 第二部分：41位，表示时间戳
  - 41位可以表达的数字可以有 `2^41 - 1` 个，换算为年有69年时间
  - `T = (1L << 41) / (1000L * 60 * 60 * 24 * 365) = 69`
- 第三部分：5位，表示机房ID
- 第四部分：5位，表示机器ID
- 第五部分：12位，表示序列号，即某个机房某台机器上这一毫秒内同时生成的ID的序号
  - 1毫秒内最多可以生成4095个序列号

